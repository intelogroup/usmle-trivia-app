import{u as e,r as a,j as s,y as r,z as t,D as i,Z as l,q as o,E as d,F as n,I as c,J as x,K as g,O as y,p as m,V as p,o as h,T as u,Y as b,_ as j,c as N,$ as v,a0 as f,a1 as k,a2 as w,a3 as C,a4 as q,a5 as S,a6 as T,a7 as z,d as L,a8 as $,a9 as B,aa as A,ab as E,ac as P,ad as _,l as F,n as H}from"./vendor-react-DID6TU-8.js";import{u as I}from"./index-McxExe4l.js";import{QuestionService as Q}from"./questionService-DP9FOlo5.js";import{q as U}from"./vendor-CCC68rl8.js";const D={Heart:_,Activity:P,Brain:y,BrainCircuit:c,Pill:E,CircleDot:A,Syringe:B,FlaskConical:$,Stethoscope:L,Thermometer:z,FirstAid:T,ScanLine:S,Eye:q,Bone:C,Lungs:w,Kidneys:k,Baby:f,Microscope:p,TestTube:v,Dna:l,BookOpen:N,Book:n,Target:m,Atom:x,LayoutGrid:d,Waves:j,Shield:b},M=()=>{const b=e(),{user:j}=I(),[N,v]=a.useState([]),[f,k]=a.useState([]),[w,C]=a.useState(!0),[q,S]=a.useState(null),[T,z]=a.useState(""),[L,$]=a.useState("all"),[B,A]=a.useState("grid"),[E,P]=a.useState(10),_=[{value:"all",label:"All",icon:d},{value:"subject",label:"Subjects",icon:n},{value:"system",label:"Systems",icon:c},{value:"topic",label:"Topics",icon:x}];a.useEffect(()=>{(async()=>{try{C(!0),S(null);const e=await Q.fetchCategories();if(!e||0===e.length)return void S("No categories found. Please check your database setup.");const a=(await Promise.all(e.map(async e=>{let a=0;try{a=j?.id?await F(e.id):0}catch(s){console.warn("Error getting progress for category:",e.id,s)}return{id:e.id,title:e.name||"Unknown Category",description:e.description||`Study ${(e.name||"").toLowerCase()} concepts and practice questions`,icon:D[e.icon_name]||x,color:e.color_code||e.color||"#6B7280",type:e.type||"subject",questionCount:e.question_count||0,difficulty:H(e.question_count||0),isPopular:(e.question_count||0)>20,progress:a}}))).filter(e=>e.questionCount>0||!1);v(a),k(a)}catch(e){console.error("Categories fetch error:",e),S(`Error loading categories: ${e.message||"Unknown error"}`)}finally{C(!1)}})()},[j]),a.useEffect(()=>{let e=N;"all"!==L&&(e=e.filter(e=>e.type===L)),T&&(e=e.filter(e=>e.title.toLowerCase().includes(T.toLowerCase())||e.description.toLowerCase().includes(T.toLowerCase()))),k(e)},[N,L,T]);const F=async e=>{try{return await Q.getUserProgress(j?.id,e)}catch(a){return console.warn("Error getting user progress:",a),0}},H=e=>e>=50?"Advanced":e>=20?"Intermediate":"Beginner",M=(e,a)=>{b("/quiz",{state:{categoryId:e,categoryName:a,questionCount:E}})};return w?s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-20 overflow-x-hidden scrollbar-hide",children:[s.jsx("div",{className:"px-3 pt-4 pb-3",children:s.jsx("div",{className:"relative",children:s.jsx("div",{className:"w-full h-12 bg-gray-200 dark:bg-gray-700 rounded-xl animate-pulse"})})}),s.jsx("div",{className:"px-3 pb-3",children:s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[s.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"}),s.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"})]})}),s.jsxs("div",{className:"px-3",children:[s.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mb-4 animate-pulse"}),s.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(e=>s.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded-xl animate-pulse"},e))})]})]}):q?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-20 overflow-x-hidden scrollbar-hide",children:s.jsx("div",{className:"px-3 pt-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-100 dark:border-gray-700 text-center",children:[s.jsx("div",{className:"text-red-500 mb-4",children:s.jsx(r,{size:48,className:"mx-auto"})}),s.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-200 mb-2",children:"Unable to Load Categories"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4 text-sm",children:q}),s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-purple-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-purple-700 transition-colors",children:"Try Again"})]})})}):s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-20 overflow-x-hidden scrollbar-hide",children:[s.jsx("div",{className:"px-3 pt-4 pb-3",children:s.jsx(U.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},children:s.jsxs("div",{className:"relative",children:[s.jsx(t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500",size:18}),s.jsx("input",{type:"text",placeholder:"Search categories...",value:T,onChange:e=>z(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-base placeholder-gray-400 dark:placeholder-gray-500 text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]})})}),s.jsx("div",{className:"px-3 pb-3",children:s.jsx(U.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.15},children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-3 border border-gray-100 dark:border-gray-700 shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[s.jsx(i,{size:14,className:"text-gray-500"}),"Questions:"]}),s.jsx("div",{className:"flex gap-1 overflow-x-auto scrollbar-hide",children:[5,10,15,20,25,30].map(e=>s.jsx("button",{onClick:()=>P(e),className:"py-1.5 px-3 rounded-lg text-sm font-medium whitespace-nowrap transition-all "+(E===e?"bg-purple-600 text-white shadow-md":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:e},e))})]})})})}),s.jsx("div",{className:"px-3 pb-3",children:s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs(U.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>b("/quiz",{state:{categoryId:"mixed",categoryName:"Quick Practice",questionCount:E}}),className:"bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-all",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center",children:s.jsx(l,{className:"w-4 h-4 text-white"})}),s.jsx("span",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:"Quick Quiz"})]}),s.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 text-left",children:[E," random questions"]})]}),s.jsxs(U.button,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>b("/quiz",{state:{categoryId:"mixed",categoryName:"Timed Challenge",questionCount:20,isTimedMode:!0}}),className:"bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-all",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg flex items-center justify-center",children:s.jsx(o,{className:"w-4 h-4 text-white"})}),s.jsx("span",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:"Timed Test"})]}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 text-left",children:"20 questions, 30 min"})]})]})}),s.jsxs("div",{className:"px-3",children:[s.jsxs(U.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"all"===L?"All Categories":_.find(e=>e.value===L)?.label||"Categories"}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full",children:[f.length," found"]})})]}),s.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto scrollbar-hide",children:_.map(e=>{const a=e.icon;return s.jsxs("button",{onClick:()=>$(e.value),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-all "+(L===e.value?"bg-purple-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:[s.jsx(a,{size:16}),e.label]},e.value)})})]}),0===f.length?s.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl p-8 border border-gray-100 dark:border-gray-700 text-center",children:[s.jsx("div",{className:"text-gray-400 dark:text-gray-500 mb-4",children:s.jsx(t,{size:48,className:"mx-auto"})}),s.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-200 mb-2",children:"No Categories Found"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4 text-sm",children:T?`No categories match "${T}". Try a different search term.`:"No categories available for the selected filter."}),(T||"all"!==L)&&s.jsx("button",{onClick:()=>{z(""),$("all")},className:"text-purple-600 hover:text-purple-700 font-medium text-sm",children:"Clear filters"}),!1]}):s.jsx(U.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"space-y-3",children:"grid"===B?s.jsx("div",{className:"space-y-4",children:f.map((e,a)=>s.jsx(K,{category:e,onClick:()=>M(e.id,e.title),delay:.1*a},e.id))}):s.jsx("div",{className:"space-y-3",children:f.map((e,a)=>s.jsx(O,{category:e,onClick:()=>M(e.id,e.title),delay:.1*a},e.id))})})]}),s.jsx("div",{className:"px-3 pb-6",children:s.jsxs(U.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("div",{className:"bg-gradient-to-br from-yellow-500/20 to-orange-500/20 p-2 rounded-lg border border-yellow-400/30",children:s.jsx(g,{className:"text-yellow-400",size:16})}),s.jsxs("h3",{className:"text-base font-bold text-gray-200 flex items-center gap-1.5",children:["Medical Study Tips",s.jsx(y,{className:"h-3 w-3 text-purple-400"})]})]}),s.jsx("div",{className:"space-y-2",children:[{icon:m,text:"Focus on high-yield topics first",color:"text-purple-400",bg:"bg-purple-500/10"},{icon:p,text:"Review pathophysiology deeply",color:"text-blue-400",bg:"bg-blue-500/10"},{icon:h,text:"Practice questions daily",color:"text-green-400",bg:"bg-green-500/10"},{icon:u,text:"Track your weak subjects",color:"text-yellow-400",bg:"bg-yellow-500/10"}].map((e,a)=>s.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-gray-700/30 transition-colors",children:[s.jsx("div",{className:`p-1.5 rounded-md ${e.bg}`,children:s.jsx(e.icon,{className:`${e.color} flex-shrink-0`,size:14})}),s.jsx("span",{className:"text-gray-300 text-xs font-medium",children:e.text})]},a))})]})})]})},K=({category:e,onClick:a,delay:r})=>{const t=e.icon;return s.jsx(U.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:r},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:a,className:"rounded-xl p-4 active:bg-gray-50 dark:active:bg-gray-800/50 transition-all border border-gray-100 dark:border-gray-700/50",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-3 rounded-lg flex-shrink-0 shadow-sm",style:{backgroundColor:`${e.color}15`,borderColor:`${e.color}30`},children:s.jsx(t,{size:24,style:{color:e.color}})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h3",{className:"font-bold text-gray-800 dark:text-gray-200 text-base truncate",children:e.title}),s.jsxs("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-1 rounded-full flex-shrink-0 ml-2",children:[e.questionCount," Qs"]})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(F,{size:14,className:"text-yellow-500"}),s.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs",children:e.difficulty})]}),s.jsx(H,{size:16,className:"text-gray-400 dark:text-gray-500"})]})]})]})})},O=({category:e,onClick:a,delay:r})=>{const t=e.icon;return s.jsxs(U.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:r},whileHover:{scale:1.01},whileTap:{scale:.99},onClick:a,className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all border border-gray-100 dark:border-gray-700 shadow-sm",children:[s.jsx("div",{className:"p-2 rounded-lg flex-shrink-0",style:{backgroundColor:`${e.color}15`},children:s.jsx(t,{size:20,style:{color:e.color}})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 text-sm truncate",children:e.title}),s.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-1 rounded-full flex-shrink-0 ml-2",children:e.questionCount})]}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs mt-0.5",children:e.description})]}),s.jsx(H,{size:16,className:"text-gray-400 dark:text-gray-500 flex-shrink-0"})]})};export{M as default};
