const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-BLuGNhcT.js","assets/vendor-0A5iGyAR.js","assets/useViewTransitions-B1BUGUmR.js","assets/QuizTab-C_bOjXQM.js","assets/Profile-Dw7Wnzyr.js","assets/Leaderboard-_Mb4PjyL.js","assets/Learn-B01HxA0P.js","assets/QuickQuiz-BKmVRVte.js","assets/QuizError-k0MqqUNg.js","assets/useQuizSounds-CP2U6g0S.js","assets/TimedTest-Bk2-HxbV.js","assets/TimedTestSetup-C6M7Wnft.js","assets/Results-BIvabIam.js","assets/CustomQuiz-DtvHlz7D.js","assets/CustomQuizSetup-CxyH5I6e.js","assets/Login-DpmNpQps.js","assets/formValidation-s8eUklyC.js","assets/SignUp-C7YsvY2X.js","assets/ForgotPassword-33LTgO4o.js","assets/Welcome-UTRA1Xv8.js","assets/Privacy-CH9V-8_K.js","assets/Terms-sKeEGHkE.js"])))=>i.map(i=>d[i]);
import{Q as e,p as t,c as r,r as s,j as a,T as i,R as n,H as o,L as l,D as c,C as u,a as d,B as h,b as m,W as g,d as p,u as y,m as f,M as x,e as b,f as w,S as j,g as k,U as v,h as N,i as E,G as _,X as T,k as S,l as C,n as R,N as q,A as P,I as A,o as I,_ as L,q as D,s as O,t as z,v as M,w as $}from"./vendor-0A5iGyAR.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const F=new e({defaultOptions:{queries:{staleTime:3e5,gcTime:18e5,refetchOnWindowFocus:!1,refetchOnReconnect:!0,refetchOnMount:!1,retry:(e,t)=>!(t?.status>=400&&t?.status<500)&&(!t?.message?.includes("Rate limit")&&e<3),retryDelay:e=>{const t=1e3*Math.pow(2,e),r=1e3*Math.random();return Math.min(t+r,3e4)},networkMode:"online",meta:{errorPolicy:"soft"}},mutations:{retry:(e,t)=>!(t?.status>=400&&t?.status<500)&&e<2,retryDelay:e=>Math.min(1e3*Math.pow(2,e),1e4),onError:(e,t,r)=>{console.error("Mutation error:",{error:e.message,variables:t,context:r,timestamp:(new Date).toISOString()}),"undefined"!=typeof window&&window.gtag&&window.gtag("event","mutation_error",{error_message:e.message,error_type:e.name})}}},queryCache:{onError:(e,t)=>{console.warn("Query error:",{error:e.message,queryKey:t.queryKey,timestamp:(new Date).toISOString()})}},mutationCache:{onError:(e,t,r,s)=>{console.warn("Mutation cache error:",{error:e.message,mutationKey:s.options.mutationKey,timestamp:(new Date).toISOString()})}}}),U={persistClient:async e=>{try{const t=JSON.stringify({clientState:e,timestamp:Date.now()});localStorage.setItem("REACT_QUERY_OFFLINE_CACHE",t)}catch(et){console.warn("Failed to persist query cache:",et)}},restoreClient:async()=>{try{const e=localStorage.getItem("REACT_QUERY_OFFLINE_CACHE");if(!e)return;const{clientState:t,timestamp:r}=JSON.parse(e),s=864e5;return Date.now()-r>s?void localStorage.removeItem("REACT_QUERY_OFFLINE_CACHE"):t}catch(et){return console.warn("Failed to restore query cache:",et),void localStorage.removeItem("REACT_QUERY_OFFLINE_CACHE")}},removeClient:async()=>{localStorage.removeItem("REACT_QUERY_OFFLINE_CACHE")}};t({queryClient:F,persister:U,maxAge:864e5,buster:"1.1.0",hydrateOptions:{defaultOptions:{queries:{staleTime:6e5}}}}),"undefined"!=typeof window&&setInterval(()=>{const e=F.getQueryCache().getAll().length;e>100&&console.warn(`High query cache count: ${e}. Consider clearing old queries.`),window.gtag&&window.gtag("event","query_cache_size",{value:e,custom_parameter:"performance_monitoring"})},3e5);const H={userData:e=>{F.invalidateQueries({predicate:t=>{const[r,s]=t.queryKey;return["userActivity","userStats","recentActivity","userProgress"].includes(r)&&s===e}})},categories:()=>{F.invalidateQueries({queryKey:["categories"]})},leaderboard:()=>{F.invalidateQueries({queryKey:["leaderboard"]})},quizData:e=>{F.invalidateQueries({predicate:e=>{const[t]=e.queryKey;return["userStats","leaderboard","userProgress"].includes(t)}})},all:()=>{console.warn("Invalidating all queries - this may impact performance"),F.invalidateQueries()}},Q={maxRetries:3,baseDelay:1e3,maxDelay:1e4,backoffMultiplier:2,jitter:!0},W={maxRetries:2,baseDelay:2e3,maxDelay:8e3,backoffMultiplier:2,jitter:!1},K={maxRetries:3,baseDelay:5e3,maxDelay:3e4,backoffMultiplier:2,jitter:!0},G={maxRetries:2,baseDelay:1500,maxDelay:6e3,backoffMultiplier:2,jitter:!0},B={maxRetries:2,baseDelay:1e3,maxDelay:5e3,backoffMultiplier:2,jitter:!0};function V(e){if(!e)return B;const t=e.message?.toLowerCase()||"",r=e.code||e.status;return t.includes("network")||t.includes("fetch failed")||t.includes("connection")||"NETWORK_ERROR"===r?Q:t.includes("timeout")||t.includes("aborted")||"TIMEOUT_ERROR"===r?W:t.includes("rate limit")||429===r||"RATE_LIMIT_ERROR"===r?K:r>=500&&r<600||t.includes("server error")?G:B}function Y(e,t){const{baseDelay:r,maxDelay:s,backoffMultiplier:a,jitter:i}=t;let n=r*Math.pow(a,e);return i&&(n*=.5+.5*Math.random()),Math.min(n,s)}class J{constructor(e={}){this.failureThreshold=e.failureThreshold||5,this.resetTimeout=e.resetTimeout||6e4,this.monitoringPeriod=e.monitoringPeriod||3e5,this.state="CLOSED",this.failures=0,this.lastFailureTime=null,this.successCount=0}async execute(e,t={}){if("OPEN"===this.state){if(!(Date.now()-this.lastFailureTime>this.resetTimeout))throw new Error(`Circuit breaker is OPEN for ${t.operationName||"operation"}. Try again later.`);this.state="HALF_OPEN",this.successCount=0,console.log(`🔄 Circuit breaker entering HALF_OPEN state for ${t.operationName||"operation"}`)}try{const r=await e();return"HALF_OPEN"===this.state?(this.successCount++,this.successCount>=3&&(this.state="CLOSED",this.failures=0,console.log(`✅ Circuit breaker reset to CLOSED state for ${t.operationName||"operation"}`))):"CLOSED"===this.state&&(this.failures=Math.max(0,this.failures-1)),r}catch(et){throw this.failures++,this.lastFailureTime=Date.now(),this.failures>=this.failureThreshold&&(this.state="OPEN",console.error(`🚨 Circuit breaker opened for ${t.operationName||"operation"} after ${this.failures} failures`)),et}}getState(){return{state:this.state,failures:this.failures,lastFailureTime:this.lastFailureTime,isHealthy:"CLOSED"===this.state&&this.failures<this.failureThreshold/2}}}const X={database:new J({failureThreshold:5,resetTimeout:3e4,monitoringPeriod:3e5}),auth:new J({failureThreshold:3,resetTimeout:6e4,monitoringPeriod:3e5}),api:new J({failureThreshold:5,resetTimeout:45e3,monitoringPeriod:3e5})};const Z=new class{constructor(){this.fallbacks=new Map,this.healthChecks=new Map}registerFallback(e,t){this.fallbacks.set(e,t)}registerHealthCheck(e,t){this.healthChecks.set(e,t)}async executeWithFallback(e,t,r={}){try{return await t()}catch(et){console.warn(`⚠️ Primary service ${e} failed, attempting fallback:`,et.message);const a=this.fallbacks.get(e);if(a)try{const s=await a(et,r);return console.log(`✅ Fallback for ${e} succeeded`),s}catch(s){throw console.error(`💥 Fallback for ${e} also failed:`,s.message),new Error(`Both primary and fallback failed for ${e}`)}throw et}}async checkHealth(e){const t=this.healthChecks.get(e);if(!t)return{healthy:!0,reason:"No health check configured"};try{return{healthy:!0,...await t()}}catch(et){return{healthy:!1,reason:et.message}}}};Z.registerFallback("leaderboard",(e,t)=>{console.log("Using cached leaderboard data");try{const t="undefined"!=typeof localStorage&&localStorage.getItem("leaderboard_cache")||"[]";return{data:JSON.parse(t),cached:!0,error:e.message}}catch{return{data:[],cached:!1,error:e.message}}}),Z.registerFallback("userProfile",(e,t)=>(console.log("Using minimal user profile"),{data:{display_name:"Guest User",total_points:0,current_streak:0},fallback:!0,error:e.message})),Z.registerFallback("questions",(e,t)=>(console.log("Using sample questions for offline mode"),{data:[{id:"offline-1",question_text:"This is a sample question for offline mode.",options:["Option A","Option B","Option C","Option D"],correct_option_id:0,points:10,difficulty:"medium",offline:!0}],offline:!0,error:e.message}));const ee=void 0;console.error("Supabase environment variables are missing"),console.error("URL:","MISSING"),console.error("KEY:","MISSING"),console.error("Using publishable key:","NO");const te=r("https://placeholder.supabase.co","placeholder-key",{db:{schema:"public"},auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"x-application-name":"usmle-trivia-app","x-client-info":"supabase-js-web"},fetch:async(e,t={})=>await async function(e,t={},r=null,s=null){let a=0;for(;;)try{const r=await e();return a>0&&t.operationName&&console.log(`✅ ${t.operationName} succeeded after ${a} retries`),r}catch(et){const i=V(et);if(a>=i.maxRetries)throw console.error(`❌ ${t.operationName||"Operation"} failed after ${a} attempts:`,et),s&&s(et,a),new Error(`Operation failed after ${i.maxRetries} retries: ${et.message}`);const n=Y(a,i);console.warn(`⚠️ ${t.operationName||"Operation"} failed (attempt ${a+1}/${i.maxRetries+1}), retrying in ${n}ms:`,et.message),r&&r(et,a+1,n),await new Promise(e=>setTimeout(e,n)),a++}}(async()=>{const r=new AbortController,s=setTimeout(()=>r.abort(),t.timeout||3e4);try{const a=await fetch(e,{...t,signal:r.signal,headers:{...t.headers,"Cache-Control":"no-cache",Pragma:"no-cache",Connection:"keep-alive"}});if(clearTimeout(s),429===a.status){const e=a.headers.get("Retry-After")||"5",t=new Error(`Rate limited. Retry after ${e} seconds`);throw t.code="RATE_LIMIT_ERROR",t.retryAfter=parseInt(e),t}if(a.status>=500){const e=new Error(`Server error: ${a.status} ${a.statusText}`);throw e.code=a.status,e}return a}catch(et){if(clearTimeout(s),"AbortError"===et.name){const e=new Error("Request timeout - please check your connection");throw e.code="TIMEOUT_ERROR",e}if(et.message.includes("Failed to fetch")||et.message.includes("NetworkError")||et.message.includes("fetch")){const e=new Error("Network error - please check your internet connection");throw e.code="NETWORK_ERROR",e}throw et}},{operationName:`Supabase request to ${e}`,timeout:t.timeout||3e4},(t,r,s)=>{console.log(`🔄 Supabase retry ${r} for ${e} in ${s}ms: ${t.message}`)},(t,r)=>{console.error(`💥 Supabase request to ${e} failed after ${r} attempts: ${t.message}`)})},realtime:{params:{eventsPerSecond:10}}}),re=Boolean(ee);const se=new class{constructor(e){this.client=e,this.setupFallbacks()}setupFallbacks(){Z.registerHealthCheck("database",async()=>{const{data:e,error:t}=await this.client.from("questions").select("count").limit(1);if(t)throw t;return{status:"healthy",timestamp:Date.now()}}),Z.registerHealthCheck("auth",async()=>{const{data:{user:e},error:t}=await this.client.auth.getUser();if(t&&"User not found"!==t.message)throw t;return{status:"healthy",authenticated:!!e}})}async query(e,t,r=null){const s=`database_${e}`;return await Z.executeWithFallback(s,async()=>await X.database.execute(t,{operationName:`Query ${e}`}),{tableName:e,fallbackKey:r})}async auth(e){return await Z.executeWithFallback("auth",async()=>await X.auth.execute(e,{operationName:"Auth operation"}))}async getQuestions(e={},t=10){return await this.query("questions",async()=>{let r=this.client.from("questions").select("*").eq("is_active",!0);e.difficulty&&(r=r.eq("difficulty",e.difficulty)),e.category&&(r=r.eq("category",e.category));const{data:s,error:a}=await r.limit(t);if(a)throw a;return{data:s,error:null}},"questions")}async getLeaderboard(e="all",t=10){return await this.query("leaderboard",async()=>{const{data:e,error:r}=await this.client.from("profiles").select("\n            id, display_name, total_points, current_streak, avatar_url,\n            user_stats (total_quizzes_completed, overall_accuracy)\n          ").not("display_name","is",null).order("total_points",{ascending:!1}).limit(t);if(r)throw r;return e&&e.length>0&&localStorage.setItem("leaderboard_cache",JSON.stringify(e)),{data:e,error:null}},"leaderboard")}async getUserProfile(e){return await this.query("userProfile",async()=>{const{data:t,error:r}=await this.client.from("profiles").select("*").eq("id",e).single();if(r)throw r;return{data:t,error:null}},"userProfile")}async getCurrentUser(){return await this.auth(async()=>await this.client.auth.getUser())}async checkHealth(){const e=await Promise.allSettled([Z.checkHealth("database"),Z.checkHealth("auth")]);return{database:"fulfilled"===e[0].status?e[0].value:{healthy:!1,reason:e[0].reason},auth:"fulfilled"===e[1].status?e[1].value:{healthy:!1,reason:e[1].reason},circuitBreakers:{database:X.database.getState(),auth:X.auth.getState(),api:X.api.getState()}}}}(te);(async()=>{try{console.log("🔍 [Supabase] Testing database connection..."),console.log("🌐 [Supabase] URL:",ee),console.log("🔑 [Supabase] Key present:",!1);const{data:e,error:t}=await te.from("tags").select("id, name").limit(1);return t?(console.error("❌ [Supabase] Connection test failed:",t),{success:!1,message:`Database error: ${t.message}`,details:t}):(console.log("✅ [Supabase] Connection test successful"),console.log("📊 [Supabase] Sample data:",e),{success:!0,message:"Database connection successful",data:e})}catch(et){return console.error("💥 [Supabase] Connection test exception:",et),{success:!1,message:`Connection failed: ${et.message}`,details:et}}})().catch(()=>{});const ae={ERROR:0,WARN:1,INFO:2,DEBUG:3,TRACE:4},ie={ERROR:"#ff4444",WARN:"#ffaa00",INFO:"#4488ff",DEBUG:"#888888",TRACE:"#cccccc"};const ne=new class{constructor(){this.level=ae.INFO,this.context={}}setContext(e){this.context={...this.context,...e}}clearContext(){this.context={}}_shouldLog(e){return ae[e]<=this.level}_formatMessage(e,t,r={}){return{timestamp:(new Date).toISOString(),level:e,message:t,context:{...this.context,...r},userAgent:navigator?.userAgent||"unknown",url:window?.location?.href||"unknown"}}_logToConsole(e,t){const{timestamp:r,message:s,context:a}=t,i=ie[e],n=`%c[${e}] ${r.split("T")[1].split(".")[0]}`;Object.keys(a).length>0?(console.groupCollapsed(n,`color: ${i}; font-weight: bold`,s),console.table(a),console.groupEnd()):console.log(n,`color: ${i}; font-weight: bold`,s)}_logToRemote(e){e.level}error(e,t={},r=null){if(!this._shouldLog("ERROR"))return;const s={...t,...r&&{errorName:r.name,errorMessage:r.message,errorStack:r.stack}},a=this._formatMessage("ERROR",e,s);return this._logToConsole("ERROR",a),this._logToRemote(a),a}warn(e,t={}){if(!this._shouldLog("WARN"))return;const r=this._formatMessage("WARN",e,t);return this._logToConsole("WARN",r),r}info(e,t={}){if(!this._shouldLog("INFO"))return;const r=this._formatMessage("INFO",e,t);return this._logToConsole("INFO",r),r}debug(e,t={}){if(!this._shouldLog("DEBUG"))return;const r=this._formatMessage("DEBUG",e,t);return this._logToConsole("DEBUG",r),r}trace(e,t={}){if(!this._shouldLog("TRACE"))return;const r=this._formatMessage("TRACE",e,t);return this._logToConsole("TRACE",r),r}success(e,t={}){if(!this._shouldLog("INFO"))return;const r=this._formatMessage("INFO",e,t),{timestamp:s,context:a}=r,i=`%c[SUCCESS] ${s.split("T")[1].split(".")[0]}`;return Object.keys(a).length>0?(console.groupCollapsed(i,"color: #22c55e; font-weight: bold",e),console.table(a),console.groupEnd()):console.log(i,"color: #22c55e; font-weight: bold",e),r}time(e){return console.time(e),e}timeEnd(e,t={}){console.timeEnd(e),this.debug(`Performance: ${e} completed`,t)}quizStart(e,t,r={}){this.setContext({userId:t,quizType:e}),this.info("Quiz session started",{quizType:e,userId:t,config:r,sessionId:r.sessionId})}quizError(e,t,r={}){this.error(`Quiz operation failed: ${e}`,r,t)}questionFetch(e,t,r=null){const s={operation:e,questionsFound:t?.length||0,...r&&{duration:r}};0===t?.length?this.warn("No questions found for fetch operation",s):this.info("Questions fetched successfully",s)}userHistoryUpdate(e,t,r=null){t?this.debug("User history updated",{questionId:e}):this.warn("User history update failed",{questionId:e},r)}fallbackUsed(e,t,r){this.warn("Fallback strategy used",{primaryOperation:e,fallbackOperation:t,reason:r})}},oe=async(e,t)=>{const r=performance.now(),s=`${e}_${Date.now()}_${Math.random().toString(36).substr(2,5)}`;ne.time(s);try{const e=await t(),a=performance.now()-r;return ne.timeEnd(s,{duration:`${a.toFixed(2)}ms`}),e}catch(et){const t=performance.now()-r;throw ne.timeEnd(s,{duration:`${t.toFixed(2)}ms`,error:!0}),et}},le={FAST:8e3,STANDARD:12e3,CRITICAL:3e4},ce={maxAttempts:3,baseDelay:1e3,maxDelay:1e4,backoffFactor:2},ue=async(e,t={})=>{const{timeout:r=le.STANDARD,retries:s=ce.maxAttempts,retryDelay:a=ce.baseDelay,queryType:i="unknown",fallback:n=null,onRetry:o=null}=t;let l=null;for(let c=1;c<=s;c++)try{const t=new Promise((e,t)=>{setTimeout(()=>{t(new Error(`Query timeout after ${r}ms (${i})`))},r)}),s=await Promise.race([e(),t]);return c>1&&ne.success(`Query succeeded on attempt ${c}`,{queryType:i,attempt:c,timeout:r}),s}catch(et){if(l=et,ne.warn(`Query attempt ${c} failed`,{queryType:i,attempt:c,error:et.message,timeout:r,willRetry:c<s}),c>=s)break;const t=Math.min(a*Math.pow(ce.backoffFactor,c-1),ce.maxDelay);o&&o(c,et,t),await new Promise(e=>setTimeout(e,t))}if(ne.error(`Query failed after ${s} attempts`,{queryType:i,timeout:r,finalError:l?.message},l),null!==n)return ne.info("Using fallback value for failed query",{queryType:i,fallback:n}),n;throw l},de=(e,t={})=>ue(e,{timeout:le.CRITICAL,retries:1,queryType:"authentication",fallback:null,...t}),he=(e,t={})=>ue(e,{timeout:le.STANDARD,retries:3,queryType:"user-data",fallback:null,...t}),me=(e,t={})=>ue(e,{timeout:le.FAST,retries:3,queryType:"categories",fallback:[],...t}),ge=async e=>{if(!e)throw new Error("User ID is required to create profile");try{ne.info(`[ProfileService] Creating profile for user: ${e}`);const{data:{user:t},error:r}=await te.auth.getUser();if(r)throw r;const s={id:e,email:t?.email,display_name:t?.user_metadata?.full_name||t?.user_metadata?.name||t?.user_metadata?.display_name||"New User",full_name:t?.user_metadata?.full_name||t?.user_metadata?.name||"",avatar_url:t?.user_metadata?.avatar_url||null,grade_id:t?.user_metadata?.grade_id||1,total_points:0,current_streak:0,best_streak:0,onboarding_completed:!1,email_verified:!!t?.email_confirmed_at,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},{data:a,error:i}=await de(te.from("profiles").insert(s).select().single(),5e3);if(i)throw ne.error(`[ProfileService] Error creating profile for user ${e}:`,i),i;return ne.info(`[ProfileService] Profile created successfully for user: ${e}`),a}catch(et){throw ne.error(`[ProfileService] Failed to create profile for user ${e}:`,et),et}};const pe=new class{constructor(){this.listeners=[],this.currentUser=null,this.currentProfile=null,this.isLoading=!0,this.subscription=null}subscribe(e){return this.listeners.push(e),e({user:this.currentUser,profile:this.currentProfile,loading:this.isLoading}),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}notifyListeners(){const e={user:this.currentUser,profile:this.currentProfile,loading:this.isLoading};this.listeners.forEach(t=>{try{t(e)}catch(et){ne.error("[AuthStateManager] Error in listener:",et)}})}initialize(){if(!re)return ne.warn("[AuthStateManager] Supabase not configured. Authentication will not work."),this.isLoading=!1,void this.notifyListeners();this.isLoading=!0,this.notifyListeners();const{data:{subscription:e}}=te.auth.onAuthStateChange(async(e,t)=>{await this.handleAuthStateChange(e,t)});return this.subscription=e,e}async handleAuthStateChange(e,t){const r=setTimeout(()=>{ne.warn(`[AuthStateManager] Auth state change handler timeout for event: ${e}`),this.isLoading=!1,this.notifyListeners()},15e3);try{ne.debug(`[AuthStateManager] Auth event: ${e}`,{session:t});const r=t?.user;this.currentUser=r??null,r?await this.loadUserProfile(r.id,e):this.currentProfile=null}catch(et){ne.error("[AuthStateManager] Error in auth state change handler:",{event:e,error:et.message,stack:et.stack}),this.currentProfile=null}finally{clearTimeout(r),this.isLoading=!1,this.notifyListeners()}}async loadUserProfile(e,t="unknown"){try{const r=await(async(e,t="unknown")=>{if(!e)return ne.warn("[ProfileService] No user ID provided for profile fetch"),null;try{ne.debug(`[ProfileService] Fetching profile for user: ${e} (event: ${t})`);const{data:r,error:s}=await de(te.from("profiles").select("*").eq("id",e).single(),5e3);if(s){if("PGRST116"===s.code)return ne.info(`[ProfileService] Profile not found for user ${e}, creating new profile`),await ge(e);throw ne.error(`[ProfileService] Error fetching profile for user ${e}:`,s),s}return ne.debug(`[ProfileService] Profile fetched successfully for user: ${e}`),r}catch(et){throw ne.error(`[ProfileService] Failed to fetch profile for user ${e}:`,et),et}})(e,t);this.currentProfile=r}catch(et){ne.error(`[AuthStateManager] Failed to load profile for user ${e}:`,et),this.currentProfile=null}}async getCurrentSession(){try{const{data:{session:e},error:t}=await te.auth.getSession();return t?(ne.error("[AuthStateManager] Error getting current session:",t),null):e}catch(et){return ne.error("[AuthStateManager] Failed to get current session:",et),null}}async getCurrentUser(){try{const{data:{user:e},error:t}=await te.auth.getUser();return t?(ne.error("[AuthStateManager] Error getting current user:",t),null):e}catch(et){return ne.error("[AuthStateManager] Failed to get current user:",et),null}}async refreshUser(){try{this.isLoading=!0,this.notifyListeners();const e=await this.getCurrentUser();this.currentUser=e,e?await this.loadUserProfile(e.id,"refresh"):this.currentProfile=null}catch(et){ne.error("[AuthStateManager] Failed to refresh user:",et)}finally{this.isLoading=!1,this.notifyListeners()}}updateProfile(e){this.currentProfile=e,this.notifyListeners()}clearState(){this.currentUser=null,this.currentProfile=null,this.isLoading=!1,this.notifyListeners()}cleanup(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=null),this.listeners=[]}getState(){return{user:this.currentUser,profile:this.currentProfile,loading:this.isLoading,isAuthenticated:!!this.currentUser,isConfigured:re}}isAuthenticated(){return!!this.currentUser}hasProfile(){return!!this.currentProfile}getUserId(){return this.currentUser?.id||null}getUserEmail(){return this.currentUser?.email||null}getUsername(){return this.currentProfile?.username||null}getFullName(){return this.currentProfile?.full_name||this.currentUser?.user_metadata?.full_name||null}},ye=s.createContext(),fe=()=>{const e=s.useContext(ye);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},xe=({children:e})=>{const[t,r]=s.useState({user:null,profile:null,loading:!0});s.useEffect(()=>{const e=pe.subscribe(r);return pe.initialize(),()=>{e(),pe.cleanup()}},[]);const i={user:t.user,profile:t.profile,loading:t.loading,isAuthenticated:!!t.user,isConfigured:re,updateProfile:async e=>{try{if(!t.user?.id)throw new Error("No authenticated user");const r=await(async(e,t)=>{if(!e)throw new Error("User ID is required to update profile");try{ne.debug(`[ProfileService] Updating profile for user: ${e}`,t);const{data:r,error:s}=await de(te.from("profiles").update({...t,updated_at:(new Date).toISOString()}).eq("id",e).select().single(),5e3);if(s)throw ne.error(`[ProfileService] Error updating profile for user ${e}:`,s),s;return ne.debug(`[ProfileService] Profile updated successfully for user: ${e}`),r}catch(et){throw ne.error(`[ProfileService] Failed to update profile for user ${e}:`,et),et}})(t.user.id,e);return pe.updateProfile(r),ne.info("[AuthContext] Profile updated successfully"),r}catch(et){throw ne.error("[AuthContext] Failed to update profile:",et),et}},refreshUser:async()=>{try{await pe.refreshUser(),ne.debug("[AuthContext] User data refreshed")}catch(et){throw ne.error("[AuthContext] Failed to refresh user:",et),et}},signOut:async()=>{try{pe.clearState(),ne.info("[AuthContext] User signed out")}catch(et){throw ne.error("[AuthContext] Error during sign out:",et),et}},userId:t.user?.id||null,userEmail:t.user?.email||null,username:t.profile?.username||null,fullName:t.profile?.full_name||t.user?.user_metadata?.full_name||null,hasProfile:!!t.profile};return a.jsx(ye.Provider,{value:i,children:e})},be=s.createContext(),we=({children:e})=>{const[t,r]=s.useState(()=>{const e=localStorage.getItem("theme");return e?"dark"===e:window.matchMedia("(prefers-color-scheme: dark)").matches});s.useEffect(()=>{localStorage.setItem("theme",t?"dark":"light"),t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]);return a.jsx(be.Provider,{value:{isDarkMode:t,toggleTheme:()=>{r(e=>!e)}},children:e})};class je extends s.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,retryCount:0}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({errorInfo:t}),ne.error("Uncaught error in React component",{errorInfo:t,componentStack:t.componentStack,errorBoundary:this.props.fallbackComponent||"default",retryCount:this.state.retryCount},e)}handleRetry=()=>{this.setState(e=>({hasError:!1,error:null,errorInfo:null,retryCount:e.retryCount+1}))};handleGoHome=()=>{window.location.href="/"};render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback(this.state.error,this.handleRetry);const{error:e}=this.state,t=e?.message?.includes("fetch")||e?.message?.includes("Network"),r=e?.message?.includes("auth")||e?.message?.includes("unauthorized");return a.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg text-center max-w-md w-full",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx(i,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:t?"Connection Error":r?"Authentication Error":"Something went wrong"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:t?"Please check your internet connection and try again.":r?"Please sign in again to continue.":"We encountered an unexpected error. Please try again."}),!1]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsxs("button",{onClick:this.handleRetry,className:"flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",disabled:this.state.retryCount>=3,children:[a.jsx(n,{className:"w-4 h-4"}),this.state.retryCount>=3?"Max retries reached":"Try Again"]}),a.jsxs("button",{onClick:this.handleGoHome,className:"flex items-center justify-center gap-2 bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:[a.jsx(o,{className:"w-4 h-4"}),"Go Home"]})]})]})})}return this.props.children}}class ke extends s.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({errorInfo:t}),ne.error("Authentication error boundary triggered",{errorInfo:t,authFlow:this.props.authFlow||"unknown",userAgent:navigator.userAgent},e)}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleGoToLogin=()=>{window.location.href="/login"};render(){if(this.state.hasError){const{error:e}=this.state,t=e?.message?.includes("session")||e?.message?.includes("token"),r=e?.message?.includes("fetch")||e?.message?.includes("Network");return a.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-xl text-center max-w-md w-full",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx(i,{className:"w-12 h-12 text-orange-500 mx-auto mb-4"}),a.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:t?"Session Expired":r?"Connection Error":"Authentication Error"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:t?"Your session has expired. Please sign in again.":r?"Unable to connect to our servers. Please check your connection.":"We encountered an issue with authentication. Please try again."})]}),a.jsxs("div",{className:"flex flex-col gap-3",children:[!t&&a.jsxs("button",{onClick:this.handleRetry,className:"flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:[a.jsx(n,{className:"w-4 h-4"}),"Try Again"]}),a.jsxs("button",{onClick:this.handleGoToLogin,className:"flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:[a.jsx(l,{className:"w-4 h-4"}),t?"Sign In Again":"Go to Login"]})]})]})})}return this.props.children}}class ve extends s.Component{constructor(e){super(e),this.state={hasError:!1,error:null,retryCount:0,lastQueryKey:e.queryKey||null}}static getDerivedStateFromProps(e,t){return e.queryKey&&e.queryKey!==t.lastQueryKey?{hasError:!1,error:null,retryCount:0,lastQueryKey:e.queryKey}:null}static getDerivedStateFromError(e){return"AbortError"===e?.name||e?.message?.includes("AbortError")||e?.message?.includes("cancelled")||e?.message?.includes("Network request failed")&&e?.message?.includes("timeout")?{hasError:!1,error:null}:{hasError:!0,error:e}}componentDidCatch(e,t){e?.name?.includes("AbortError")||e?.message?.includes("cancelled")||e?.message?.includes("timeout")||ne.error("Query error boundary triggered",{errorInfo:t,queryType:this.props.queryType||"unknown",retryCount:this.state.retryCount,errorType:e?.name||"Unknown",isNetworkError:e?.message?.includes("fetch")||e?.message?.includes("Network")},e)}handleRetry=()=>{const{error:e}=this.state,t=e?.message?.includes("fetch")||e?.message?.includes("Network"),r=e?.message?.includes("timeout")||e?.message?.includes("Timeout");setTimeout(()=>{this.setState(e=>({hasError:!1,error:null,retryCount:e.retryCount+1})),this.props.onRetry&&this.props.onRetry()},t||r?1e3:0)};render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback(this.state.error,this.handleRetry);const{error:e}=this.state,t=e?.message?.includes("timeout")||e?.message?.includes("Timeout"),r=e?.message?.includes("fetch")||e?.message?.includes("Network"),s=this.state.retryCount<3;return a.jsx("div",{className:"flex flex-col items-center justify-center p-8 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"text-center max-w-sm",children:[a.jsxs("div",{className:"mb-4",children:[r?a.jsx(c,{className:"w-12 h-12 text-red-500 mx-auto mb-3"}):a.jsx(u,{className:"w-12 h-12 text-orange-500 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t?"Request Timeout":r?"Connection Error":"Data Loading Error"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:t?"The request took too long to complete.":r?"Unable to connect to the server.":"Failed to load the requested data."})]}),s&&a.jsxs("button",{onClick:this.handleRetry,className:"flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors mx-auto",children:[a.jsx(n,{className:"w-4 h-4"}),"Try Again"]}),!s&&a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Maximum retry attempts reached. Please refresh the page."})]})})}return this.props.children}}class Ne extends s.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({errorInfo:t}),ne.error("Quiz error boundary triggered",{errorInfo:t,quizType:this.props.quizType||"unknown",questionId:this.props.questionId,sessionId:this.props.sessionId},e)}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleGoHome=()=>{window.location.href="/"};handleGoToQuizTab=()=>{window.location.href="/quiz"};render(){if(this.state.hasError){const{error:e}=this.state,t=e?.message?.includes("question")||e?.message?.includes("Question"),r=e?.message?.includes("session")||e?.message?.includes("Session");return a.jsx("div",{className:"flex flex-col items-center justify-center min-h-[400px] bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 rounded-xl p-8",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg text-center max-w-md w-full",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx(i,{className:"w-16 h-16 text-purple-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:t?"Question Loading Error":r?"Quiz Session Error":"Quiz Error"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:t?"Unable to load the current question. This might be a temporary issue.":r?"There was an issue with your quiz session. Your progress may not be saved.":"An unexpected error occurred during the quiz. Don't worry, your progress is safe."})]}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("button",{onClick:this.handleRetry,className:"flex items-center justify-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:[a.jsx(d,{className:"w-4 h-4"}),"Try Again"]}),a.jsxs("button",{onClick:this.handleGoToQuizTab,className:"flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:[a.jsx(h,{className:"w-4 h-4"}),"Back to Quiz Selection"]}),a.jsxs("button",{onClick:this.handleGoHome,className:"flex items-center justify-center gap-2 bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:[a.jsx(o,{className:"w-4 h-4"}),"Go Home"]})]})]})})}return this.props.children}}class Ee extends m.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,retryCount:0,isRetrying:!1,hasMaxRetries:!1,networkOffline:!1,retryCountdown:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),console.error("NetworkErrorBoundary caught an error:",e,t),"undefined"!=typeof window&&window.gtag&&window.gtag("event","error_boundary_triggered",{error_message:e.message,error_stack:e.stack,component_stack:t.componentStack})}handleRetry=async()=>{const{retryCount:e}=this.state;if(e>=3)return void this.setState({hasMaxRetries:!0,isRetrying:!1});this.setState({isRetrying:!0,hasMaxRetries:!1});const t=1e3*Math.pow(2,e),r=500*Math.random(),s=Math.min(t+r,1e4);let a=Math.ceil(s/1e3);const i=setInterval(()=>{a>0?(this.setState({retryCountdown:a}),a--):(clearInterval(i),this.setState({retryCountdown:null}))},1e3);await new Promise(e=>setTimeout(e,s)),clearInterval(i),"undefined"==typeof navigator||navigator.onLine?(this.setState({hasError:!1,error:null,errorInfo:null,retryCount:e+1,isRetrying:!1,networkOffline:!1,retryCountdown:null}),this.props.onRetry&&this.props.onRetry()):this.setState({isRetrying:!1,networkOffline:!0,retryCountdown:null})};handleRefresh=()=>{window.location.reload()};getErrorType(){const{error:e}=this.state;if(!e)return"unknown";const t=e.message?.toLowerCase()||"";return t.includes("network")||t.includes("fetch")?"network":t.includes("timeout")?"timeout":t.includes("rate limit")?"rateLimit":t.includes("cors")?"cors":"application"}renderErrorMessage(){const e=this.getErrorType(),{retryCount:t}=this.state,r={network:{title:"Connection Problem",description:"Unable to connect to the server. Please check your internet connection.",icon:g,canRetry:!0},timeout:{title:"Request Timeout",description:"The request is taking longer than expected. This might be due to high server load.",icon:i,canRetry:!0},rateLimit:{title:"Too Many Requests",description:"You're making requests too quickly. Please wait a moment before trying again.",icon:i,canRetry:!0},cors:{title:"Configuration Error",description:"There's a configuration issue. Please contact support.",icon:i,canRetry:!1},application:{title:"Application Error",description:"Something went wrong in the application. We're working to fix this.",icon:i,canRetry:!0},unknown:{title:"Unexpected Error",description:"An unexpected error occurred. Please try again.",icon:i,canRetry:!0}}[e],s=r.icon;return a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"bg-red-100 dark:bg-red-900/20 p-4 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center",children:a.jsx(s,{className:"w-10 h-10 text-red-600 dark:text-red-400"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:r.title}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:r.description})]}),t>0&&!this.state.hasMaxRetries&&a.jsx("div",{className:"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:a.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:["Retry attempt ",t,"/3"]})}),this.state.hasMaxRetries&&a.jsxs("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[a.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 font-medium",children:"Maximum retry attempts reached"}),a.jsx("p",{className:"text-xs text-red-600 dark:text-red-300 mt-1",children:"Please check your internet connection or try refreshing the page"})]}),this.state.networkOffline&&a.jsxs("div",{className:"mb-4 p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[a.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-200 font-medium",children:"No internet connection detected"}),a.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-300 mt-1",children:"Please check your network connection and try again"})]}),this.state.retryCountdown&&a.jsx("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:a.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["Retrying in ",this.state.retryCountdown," second",1!==this.state.retryCountdown?"s":"","..."]})}),a.jsxs("div",{className:"space-y-3",children:[r.canRetry&&!this.state.hasMaxRetries&&!this.state.networkOffline&&a.jsx("button",{onClick:this.handleRetry,disabled:this.state.isRetrying||this.state.retryCountdown,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-all duration-200",children:this.state.isRetrying?a.jsxs(a.Fragment,{children:[a.jsx(n,{className:"w-4 h-4 animate-spin"}),this.state.retryCountdown?`Retrying in ${this.state.retryCountdown}s`:"Retrying..."]}):a.jsxs(a.Fragment,{children:[a.jsx(n,{className:"w-4 h-4"}),"Try Again ",t>0?`(${t+1}/3)`:""]})}),this.state.networkOffline&&a.jsxs("button",{onClick:()=>{this.setState({networkOffline:!1}),this.handleRetry()},className:"w-full bg-orange-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-orange-700 flex items-center justify-center gap-2",children:[a.jsx(g,{className:"w-4 h-4"}),"Check Connection & Retry"]}),a.jsx("button",{onClick:this.handleRefresh,className:"w-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 py-3 px-4 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-gray-600",children:"Refresh Page"})]}),!1]})})}render(){return this.state.hasError?this.renderErrorMessage():this.props.children}}const _e=({children:e,fallback:t})=>a.jsx(p,{children:({reset:r})=>a.jsx(Ee,{onRetry:r,fallback:t,children:e})});function Te(e,t={}){return e||"https://via.placeholder.com/150"}const Se=({onSidebarToggle:e,showSidebarToggle:t=!1,isCondensed:r=!1,user:i,profile:n})=>{const o=y(),{isDarkMode:l,toggleTheme:c}=(()=>{const e=s.useContext(be);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e})(),u=e=>{navigator.vibrate&&navigator.vibrate(5),e()};return a.jsx(f.header,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},className:"bg-white/98 dark:bg-gray-900/98 backdrop-blur-xl shadow-sm border-b border-gray-200/30 dark:border-gray-700/30 sticky top-0 z-40 transition-all duration-300 py-2",style:{paddingTop:r?"8px":"max(8px, env(safe-area-inset-top))",paddingLeft:"env(safe-area-inset-left)",paddingRight:"env(safe-area-inset-right)"},children:a.jsx("div",{className:"flex items-center justify-end px-3 w-full "+(r?"max-w-none":"max-w-full"),children:a.jsxs("div",{className:"flex items-center gap-1",children:[t&&a.jsx(f.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-all duration-200",children:a.jsx(x,{size:20,className:"text-gray-600 dark:text-gray-300"})}),a.jsxs(f.div,{whileHover:{scale:1.05},whileTap:{scale:.95},initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2},className:"flex items-center gap-1 bg-gradient-to-r from-orange-500 via-orange-600 to-red-500 text-white px-2.5 py-1 rounded-full text-xs font-bold shadow-lg shadow-orange-500/25",children:[a.jsx(f.div,{animate:{rotate:[0,-10,10,-5,5,0],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,repeatDelay:3},children:a.jsx(b,{size:12,className:"drop-shadow-sm"})}),a.jsx("span",{className:"tracking-tight",children:n?.total_points?.toLocaleString()||"0"})]}),a.jsxs(f.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u(()=>{}),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-all duration-200 relative active:bg-gray-200 dark:active:bg-gray-700",children:[a.jsx(w,{size:16,className:"text-gray-600 dark:text-gray-300",strokeWidth:2}),a.jsx(f.div,{animate:{scale:[1,1.2,1],opacity:[1,.8,1]},transition:{duration:2,repeat:1/0,repeatDelay:1},className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full shadow-sm"})]}),a.jsx(f.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u(c),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-all duration-200 active:bg-gray-200 dark:active:bg-gray-700",children:a.jsx(f.div,{animate:{rotate:l?180:0},transition:{type:"spring",stiffness:200,damping:15},children:l?a.jsx(j,{size:16,className:"text-yellow-500 drop-shadow-sm",strokeWidth:2}):a.jsx(k,{size:16,className:"text-gray-600 dark:text-gray-300",strokeWidth:2})})}),a.jsxs(f.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u(()=>o("/profile")),className:"relative",children:[a.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden shadow-lg ring-2 ring-white/50 dark:ring-gray-700/50 bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:i?.avatar_url?a.jsx("img",{src:Te(i.avatar_url,{width:80,height:80}),alt:"Profile",className:"w-full h-full object-cover transition-transform duration-300 hover:scale-110"}):a.jsx(v,{size:18,className:"text-white"})}),a.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 bg-green-500 rounded-full border-2 border-white dark:border-gray-900 shadow-sm"})]})]})})})},Ce=()=>{const e=N(),t=y(),r=[{icon:o,label:"Home",path:"/",color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-500",gradient:"from-blue-500 to-blue-600"},{icon:h,label:"Learn",path:"/learn",color:"text-emerald-600 dark:text-emerald-400",bgColor:"bg-emerald-500",gradient:"from-emerald-500 to-emerald-600"},{icon:E,label:"Quiz",path:"/quiz",color:"text-purple-600 dark:text-purple-400",bgColor:"bg-purple-500",gradient:"from-purple-500 to-purple-600"},{icon:b,label:"Leaders",path:"/leaderboard",color:"text-orange-600 dark:text-orange-400",bgColor:"bg-orange-500",gradient:"from-orange-500 to-orange-600"}];return a.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md border-t border-gray-200/50 dark:border-gray-700/50 px-1 py-0.5 z-50",children:a.jsx("div",{className:"flex justify-around items-center max-w-md mx-auto",children:r.map(r=>{const s=r.icon,i="/"===(n=r.path)?"/"===e.pathname:e.pathname.startsWith(n);var n;return a.jsxs(f.button,{onClick:()=>t(r.path),className:"relative flex flex-col items-center justify-center px-1.5 py-1 min-w-0 flex-1",whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},"aria-label":`${r.label}${i?" (current page)":""}`,"aria-current":i?"page":void 0,children:[a.jsx(f.div,{className:"p-1 rounded-md transition-all duration-200",animate:{scale:i?1.05:1,y:i?-1:0},transition:{type:"spring",stiffness:400,damping:17},children:a.jsx(s,{className:`w-4 h-4 transition-colors duration-200 ${i?r.color:"text-gray-500 dark:text-gray-400"}`,"aria-hidden":"true"})}),a.jsx("span",{className:`text-[9px] font-medium mt-0.5 transition-colors duration-200 ${i?r.color:"text-gray-500 dark:text-gray-400"}`,children:r.label})]},r.path)})})})},Re=({isOpen:e,onToggle:t,isTablet:r})=>{const s=N(),i=y(),{user:n,profile:l}=fe(),c=[{icon:o,label:"Home",path:"/",color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-500",gradient:"from-blue-500 to-blue-600"},{icon:h,label:"Quiz",path:"/quiz",color:"text-purple-600 dark:text-purple-400",bgColor:"bg-purple-500",gradient:"from-purple-500 to-purple-600"},{icon:_,label:"Learn",path:"/learn",color:"text-emerald-600 dark:text-emerald-400",bgColor:"bg-emerald-500",gradient:"from-emerald-500 to-emerald-600"},{icon:b,label:"Leaderboard",path:"/leaderboard",color:"text-orange-600 dark:text-orange-400",bgColor:"bg-orange-500",gradient:"from-orange-500 to-orange-600"},{icon:S,label:"Statistics",path:"/profile",color:"text-green-600 dark:text-green-400",bgColor:"bg-green-500",gradient:"from-green-500 to-green-600"}];return n?.user_metadata?.full_name?.split(" ")[0],a.jsxs(f.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"h-full bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl border-r border-gray-200/50 dark:border-gray-700/50 flex flex-col w-full "+(r?"fixed left-0 top-0 z-50 w-72":""),children:[a.jsxs("div",{className:"p-3 border-b border-gray-200/30 dark:border-gray-700/30",children:[a.jsxs(f.div,{initial:{y:-10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl flex items-center justify-center",children:a.jsx(_,{size:20,className:"text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"USMLE Trivia"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Study Smart, Score High"})]})]}),r&&a.jsx("button",{onClick:t,className:"absolute top-3 right-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:a.jsx(T,{size:18,className:"text-gray-500 dark:text-gray-400"})})]}),a.jsx("nav",{className:"flex-1 p-3",children:a.jsx("div",{className:"space-y-1",children:c.map(e=>{const t=e.icon,r="/"===(n=e.path)?"/"===s.pathname:s.pathname.startsWith(n);var n;return a.jsxs(f.button,{onClick:()=>i(e.path),className:"w-full flex items-center space-x-2 px-3 py-2.5 rounded-lg transition-all duration-200 group "+(r?"text-gray-900 dark:text-white bg-gray-100/50 dark:bg-gray-800/50":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-gray-200"),whileHover:{scale:1.01},whileTap:{scale:.99},children:[a.jsx("div",{className:"p-1.5 rounded-md transition-all duration-200 "+(r?`${e.color} bg-gray-200 dark:bg-gray-700`:"bg-gray-100 dark:bg-gray-700 group-hover:bg-gray-200 dark:group-hover:bg-gray-600"),children:a.jsx(t,{size:16})}),a.jsx("span",{className:"font-medium text-sm",children:e.label})]},e.path)})})}),a.jsx("div",{className:"p-3 border-t border-gray-200/30 dark:border-gray-700/30",children:a.jsxs(f.button,{onClick:()=>i("/profile"),className:"w-full flex items-center space-x-2 px-3 py-2.5 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-gray-200 transition-all duration-200",whileHover:{scale:1.01},whileTap:{scale:.99},children:[a.jsx("div",{className:"p-1.5 rounded-md bg-gray-100 dark:bg-gray-700",children:a.jsx(v,{size:16})}),a.jsx("span",{className:"font-medium text-sm",children:"Profile"})]})})]})},qe=[],Pe=[],Ae=({children:e})=>{const{user:t,profile:r}=fe(),[i,n]=s.useState(!1),[o,l]=s.useState(!0),c=N();s.useEffect(()=>{const e=()=>{const e=window.innerWidth<768;l(e),!e&&window.innerWidth>=1024?n(!0):e&&n(!1)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const u=()=>{n(!i)},d=!qe.includes(c.pathname),h=!Pe.includes(c.pathname);return a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300",style:{paddingLeft:"env(safe-area-inset-left)",paddingRight:"env(safe-area-inset-right)"},children:o?a.jsxs("div",{className:"flex flex-col min-h-screen",children:[d&&a.jsx("header",{role:"banner",children:a.jsx(Se,{user:t,profile:r})}),a.jsx("main",{role:"main","aria-label":"Main content",className:"flex-1 relative",children:a.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.25,.46,.45,.94]},className:"container mx-auto px-3 py-2 max-w-full sm:max-w-screen-sm min-h-full",children:e})}),h&&a.jsx("nav",{role:"navigation","aria-label":"Main navigation",children:a.jsx(Ce,{})})]}):a.jsxs("div",{className:"flex min-h-screen w-full overflow-hidden",children:[i&&a.jsx("aside",{role:"navigation","aria-label":"Sidebar navigation",className:"w-[15%] min-w-[180px] max-w-[200px] flex-shrink-0",children:a.jsx(Re,{isOpen:i,onToggle:u,isTablet:window.innerWidth<1024})}),a.jsxs("div",{className:(i?"w-[85%]":"w-full")+" flex flex-col min-h-screen overflow-hidden transition-all duration-300",children:[d&&a.jsx("header",{role:"banner",children:a.jsx(Se,{onSidebarToggle:u,showSidebarToggle:window.innerWidth<1024,isCondensed:!1,user:t,profile:r})}),a.jsx("main",{role:"main","aria-label":"Main content",className:"flex-1 overflow-auto",children:a.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.25,.46,.45,.94]},className:"h-full px-4 py-4",children:a.jsx("div",{className:"max-w-full h-full",children:e})})})]}),i&&window.innerWidth<1024&&a.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50",onClick:()=>n(!1)})]})})},Ie=()=>a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary-600 via-secondary-600 to-purple-700 flex items-center justify-center",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(f.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:260,damping:20,duration:1.2},className:"mb-8",children:a.jsxs("div",{className:"relative mx-auto w-24 h-24 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm border border-white/30",children:[a.jsx(C,{className:"w-12 h-12 text-white"}),a.jsx("div",{className:"absolute -top-2 -right-2",children:a.jsx("div",{className:"w-6 h-6 bg-accent-400 rounded-full flex items-center justify-center",children:a.jsx(R,{className:"w-3 h-3 text-white"})})})]})}),a.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.6},className:"mb-4",children:[a.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"USMLE Trivia"}),a.jsx("p",{className:"text-white/80 text-lg",children:"Master Medicine, One Question at a Time"})]}),a.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.6},className:"flex flex-wrap justify-center gap-4 mb-8",children:[a.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 rounded-full px-4 py-2 backdrop-blur-sm",children:[a.jsx(h,{className:"w-4 h-4 text-white"}),a.jsx("span",{className:"text-white text-sm font-medium",children:"Study Smart"})]}),a.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 rounded-full px-4 py-2 backdrop-blur-sm",children:[a.jsx(b,{className:"w-4 h-4 text-white"}),a.jsx("span",{className:"text-white text-sm font-medium",children:"Track Progress"})]})]}),a.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2,duration:.4},className:"flex justify-center",children:a.jsx("div",{className:"flex space-x-2",children:[0,1,2].map(e=>a.jsx(f.div,{animate:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,delay:.2*e},className:"w-2 h-2 bg-white rounded-full"},e))})})]}),a.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:a.jsx(f.div,{animate:{backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:20,repeat:1/0,repeatType:"reverse",ease:"linear"},className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 25% 25%, white 2px, transparent 2px),\n                             radial-gradient(circle at 75% 75%, white 2px, transparent 2px)",backgroundSize:"40px 40px"}})})]}),Le=({children:e})=>{const{user:t,loading:r}=fe(),s=N();if(r)return a.jsx(Ie,{});if(!t){return["/login","/welcome","/signup","/forgot-password"].includes(s.pathname)?a.jsx(Ie,{}):a.jsx(q,{to:"/welcome",state:{from:s},replace:!0})}return e},De=()=>a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-expo-950",children:a.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),a.jsx("div",{className:"absolute inset-0 w-12 h-12 border-4 border-transparent border-t-blue-400 rounded-full animate-spin opacity-60",style:{animationDelay:"-0.15s"}})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 animate-pulse",children:"Loading..."}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Preparing your USMLE experience"})]})]})}),Oe={title:"Question Loading Failed",message:"Unable to load quiz questions. Please check your connection and try again.",severity:"error",actions:["retry","goHome"]},ze={title:"Progress Tracking Issue",message:"Your progress may not be saved properly, but you can continue the quiz.",severity:"warning",actions:["continue"]},Me={title:"Quiz Setup Failed",message:"Unable to start the quiz session. Please try again.",severity:"error",actions:["retry","goHome"]},$e={title:"Answer Not Saved",message:"Your answer may not have been recorded. You can continue, but progress might be lost.",severity:"warning",actions:["continue","retry"]},Fe={title:"Not Enough Questions",message:"There aren't enough questions available for your selection. Try adjusting your filters.",severity:"info",actions:["goBack","tryDifferentSettings"]},Ue={title:"Authentication Required",message:"Please log in to continue with your quiz.",severity:"error",actions:["login","goHome"]},He={title:"Connection Problem",message:"Check your internet connection and try again.",severity:"error",actions:["retry","offline"]},Qe={title:"Something Went Wrong",message:"An unexpected error occurred. Please try again.",severity:"error",actions:["retry","goHome"]},We={title:"Invalid Input",message:"Please check your input and try again.",severity:"warning",actions:["retry"]},Ke={title:"Request Timeout",message:"The request took too long. Please try again.",severity:"error",actions:["retry","goHome"]},Ge={title:"Access Denied",message:"You don't have permission to perform this action.",severity:"error",actions:["goHome","login"]},Be={title:"Too Many Requests",message:"Please wait a moment before trying again.",severity:"warning",actions:["wait","retry"]},Ve={title:"Service Maintenance",message:"The service is temporarily unavailable for maintenance.",severity:"info",actions:["wait","goHome"]},Ye=(e,t={})=>{const r=(e=>{if(!e)return Qe;const t=e.message||e.toString(),r=e.code||e.status;return t.includes("fetch")||t.includes("network")||t.includes("NetworkError")||"NETWORK_ERROR"===r?He:t.includes("auth")||t.includes("unauthorized")||t.includes("login")||401===r?Ue:t.includes("permission")||t.includes("forbidden")||403===r?Ge:t.includes("rate limit")||t.includes("too many requests")||429===r?Be:t.includes("timeout")||t.includes("timed out")||"TIMEOUT"===r?Ke:t.includes("validation")||t.includes("invalid")||400===r?We:t.includes("question")||t.includes("insufficient")?t.includes("insufficient")||t.includes("not enough")?Fe:Oe:t.includes("session")||t.includes("quiz setup")?Me:t.includes("response")||t.includes("answer")||t.includes("recording")?$e:t.includes("history")||t.includes("progress")?ze:t.includes("maintenance")||t.includes("unavailable")||503===r?Ve:Qe})(e);return ne.error("Error occurred",{originalError:e,errorType:r.title,context:t}),{...r,originalError:e,context:t,timestamp:(new Date).toISOString()}};let Je=1;const Xe=new class{constructor(){this.toasts=[],this.listeners=[]}addToast(e){const t="toast-"+Je++,r={id:t,...e,timestamp:Date.now()};return this.toasts.push(r),this.notifyListeners(),r.autoHide&&setTimeout(()=>{this.removeToast(t)},r.hideDelay||5e3),t}removeToast(e){this.toasts=this.toasts.filter(t=>t.id!==e),this.notifyListeners()}clearAll(){this.toasts=[],this.notifyListeners()}getToasts(){return[...this.toasts]}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}notifyListeners(){this.listeners.forEach(e=>{try{e(this.toasts)}catch(et){ne.error("Error in toast listener",et)}})}success(e,t={}){return this.addToast({type:"success",title:t.title||"Success",message:e,severity:"success",autoHide:!0,hideDelay:3e3,dismissible:!0,...t})}error(e,t={},r={}){const s=((e,t={})=>{const r=Ye(e,t);return{id:`error-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,title:r.title,message:r.message,severity:r.severity,actions:r.actions,timestamp:r.timestamp,dismissible:!0,autoHide:"error"!==r.severity,hideDelay:"info"===r.severity?5e3:8e3}})(e,t);return this.addToast({type:"error",...s,...r})}warning(e,t={}){return this.addToast({type:"warning",title:t.title||"Warning",message:e,severity:"warning",autoHide:!0,hideDelay:5e3,dismissible:!0,...t})}info(e,t={}){return this.addToast({type:"info",title:t.title||"Information",message:e,severity:"info",autoHide:!0,hideDelay:4e3,dismissible:!0,...t})}loading(e,t={}){return this.addToast({type:"loading",title:t.title||"Loading",message:e,severity:"info",autoHide:!1,dismissible:!1,showSpinner:!0,...t})}updateToast(e,t){const r=this.toasts.findIndex(t=>t.id===e);-1!==r&&(this.toasts[r]={...this.toasts[r],...t},this.notifyListeners())}quizError(e,t={}){return this.error(e,{...t,source:"quiz"})}quizSuccess(e,t={}){return this.success(e,{...t,source:"quiz"})}quizWarning(e,t={}){return this.warning(e,{...t,source:"quiz"})}authError(e,t={}){return this.error(e,{...t,source:"auth"})}authSuccess(e,t={}){return this.success(e,{...t,source:"auth"})}networkError(e,t={}){return this.error(e,{...t,source:"network"})}showMultiple(e){const t=[];return e.forEach(e=>{const r=this.addToast(e);t.push(r)}),t}clearByType(e){this.toasts=this.toasts.filter(t=>t.type!==e),this.notifyListeners()}clearBySource(e){this.toasts=this.toasts.filter(t=>t.source!==e),this.notifyListeners()}getCountBySeverity(e){return this.toasts.filter(t=>t.severity===e).length}hasErrors(){return this.getCountBySeverity("error")>0}hasWarnings(){return this.getCountBySeverity("warning")>0}},{success:Ze,error:et,warning:tt,info:rt,loading:st,quizError:at,quizSuccess:it,quizWarning:nt,authError:ot,authSuccess:lt,networkError:ct}=Xe,ut=()=>{const[e,t]=s.useState([]);s.useEffect(()=>{const e=setInterval(()=>{const e=Xe.getToasts();t(e)},100);return()=>clearInterval(e)},[]);const r=e=>{switch(e){case"error":return a.jsx(u,{className:"w-5 h-5 text-red-500"});case"warning":return a.jsx(i,{className:"w-5 h-5 text-yellow-500"});case"success":return a.jsx(I,{className:"w-5 h-5 text-green-500"});default:return a.jsx(A,{className:"w-5 h-5 text-blue-500"})}},n=e=>{switch(e){case"error":return"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-800";case"warning":return"bg-yellow-50 border-yellow-200 dark:bg-yellow-900/20 dark:border-yellow-800";case"success":return"bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-800";default:return"bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-800"}},o=e=>{t(t=>t.filter(t=>t.id!==e))};return 0===e.length?null:a.jsxs("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-md",children:[a.jsx(P,{children:e.map(e=>a.jsx(f.div,{initial:{opacity:0,x:300,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.8},transition:{duration:.3,type:"spring",stiffness:300,damping:25},className:`\n              p-4 rounded-lg border shadow-lg backdrop-blur-sm\n              ${n(e.severity)}\n            `,children:a.jsxs("div",{className:"flex items-start gap-3",children:[r(e.severity),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm",children:e.title}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mt-1",children:e.message}),e.actions&&e.actions.length>0&&a.jsx("div",{className:"flex gap-2 mt-3",children:e.actions.map(t=>a.jsx("button",{onClick:()=>((e,t)=>{e.handler(t.context),o(t.id)})(t,e),className:`\n                          px-3 py-1.5 text-xs font-medium rounded-md transition-colors\n                          ${"primary"===t.variant?"bg-blue-600 text-white hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600":"bg-gray-200 text-gray-800 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600"}\n                        `,children:t.label},t.key))})]}),a.jsx("button",{onClick:()=>o(e.id),className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition-colors",children:a.jsx(T,{className:"w-4 h-4"})})]})},e.id))}),e.length>1&&a.jsxs(f.button,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{Xe.clearAll(),t([])},className:"w-full mt-2 px-3 py-2 text-xs font-medium text-gray-600 dark:text-gray-400 \n                     bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-md border border-gray-200 dark:border-gray-700\n                     hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:["Dismiss All (",e.length,")"]})]})},dt=s.lazy(()=>L(()=>import("./Home-BLuGNhcT.js"),__vite__mapDeps([0,1,2]))),ht=s.lazy(()=>L(()=>import("./QuizTab-C_bOjXQM.js"),__vite__mapDeps([3,1,2]))),mt=s.lazy(()=>L(()=>import("./Profile-Dw7Wnzyr.js"),__vite__mapDeps([4,1]))),gt=s.lazy(()=>L(()=>import("./Leaderboard-_Mb4PjyL.js"),__vite__mapDeps([5,1]))),pt=s.lazy(()=>L(()=>import("./Learn-B01HxA0P.js"),__vite__mapDeps([6,1]))),yt=s.lazy(()=>L(()=>import("./QuickQuiz-BKmVRVte.js"),__vite__mapDeps([7,1,8,9]))),ft=s.lazy(()=>L(()=>import("./TimedTest-Bk2-HxbV.js"),__vite__mapDeps([10,1,8]))),xt=s.lazy(()=>L(()=>import("./TimedTestSetup-C6M7Wnft.js"),__vite__mapDeps([11,1]))),bt=s.lazy(()=>L(()=>import("./Results-BIvabIam.js"),__vite__mapDeps([12,1]))),wt=s.lazy(()=>L(()=>import("./CustomQuiz-DtvHlz7D.js"),__vite__mapDeps([13,1,8,9]))),jt=s.lazy(()=>L(()=>import("./CustomQuizSetup-CxyH5I6e.js"),__vite__mapDeps([14,1]))),kt=s.lazy(()=>L(()=>import("./Login-DpmNpQps.js"),__vite__mapDeps([15,1,16]))),vt=s.lazy(()=>L(()=>import("./SignUp-C7YsvY2X.js"),__vite__mapDeps([17,1,16]))),Nt=s.lazy(()=>L(()=>import("./ForgotPassword-33LTgO4o.js"),__vite__mapDeps([18,1]))),Et=s.lazy(()=>L(()=>import("./Welcome-UTRA1Xv8.js"),__vite__mapDeps([19,1]))),_t=s.lazy(()=>L(()=>import("./Privacy-CH9V-8_K.js"),__vite__mapDeps([20,1]))),Tt=s.lazy(()=>L(()=>import("./Terms-sKeEGHkE.js"),__vite__mapDeps([21,1])));function St(){return a.jsx(_e,{children:a.jsxs(je,{children:[a.jsx(ut,{}),a.jsxs(D,{children:[a.jsx(O,{path:"/login",element:a.jsx(ke,{authFlow:"login",children:a.jsx(s.Suspense,{fallback:a.jsx(Ie,{}),children:a.jsx(kt,{})})})}),a.jsx(O,{path:"/signup",element:a.jsx(ke,{authFlow:"signup",children:a.jsx(s.Suspense,{fallback:a.jsx(Ie,{}),children:a.jsx(vt,{})})})}),a.jsx(O,{path:"/forgot-password",element:a.jsx(ke,{authFlow:"forgot-password",children:a.jsx(s.Suspense,{fallback:a.jsx(Ie,{}),children:a.jsx(Nt,{})})})}),a.jsx(O,{path:"/welcome",element:a.jsx(ke,{authFlow:"welcome",children:a.jsx(s.Suspense,{fallback:a.jsx(Ie,{}),children:a.jsx(Et,{})})})}),a.jsx(O,{path:"/privacy",element:a.jsx(s.Suspense,{fallback:a.jsx(De,{}),children:a.jsx(_t,{})})}),a.jsx(O,{path:"/terms",element:a.jsx(s.Suspense,{fallback:a.jsx(De,{}),children:a.jsx(Tt,{})})}),a.jsx(O,{path:"/*",element:a.jsx(Le,{children:a.jsx(ve,{queryType:"app-data",children:a.jsx(Ae,{children:a.jsx(s.Suspense,{fallback:a.jsx(De,{}),children:a.jsxs(D,{children:[a.jsx(O,{path:"/",element:a.jsx(ve,{queryType:"home-data",children:a.jsx(dt,{})})}),a.jsx(O,{path:"/quiz",element:a.jsx(ve,{queryType:"quiz-categories",children:a.jsx(ht,{})})}),a.jsx(O,{path:"/quiz/:categoryId",element:a.jsx(Ne,{quizType:"quick-quiz",children:a.jsx(yt,{})})}),a.jsx(O,{path:"/profile",element:a.jsx(ve,{queryType:"profile-data",children:a.jsx(mt,{})})}),a.jsx(O,{path:"/leaderboard",element:a.jsx(ve,{queryType:"leaderboard-data",children:a.jsx(gt,{})})}),a.jsx(O,{path:"/learn",element:a.jsx(pt,{})}),a.jsx(O,{path:"/quick-quiz",element:a.jsx(Ne,{quizType:"quick-quiz",children:a.jsx(yt,{})})}),a.jsx(O,{path:"/timed-test-setup",element:a.jsx(Ne,{quizType:"timed-test-setup",children:a.jsx(xt,{})})}),a.jsx(O,{path:"/timed-test",element:a.jsx(Ne,{quizType:"timed-test",children:a.jsx(ft,{})})}),a.jsx(O,{path:"/custom-quiz-setup",element:a.jsx(Ne,{quizType:"custom-quiz-setup",children:a.jsx(jt,{})})}),a.jsx(O,{path:"/custom-quiz",element:a.jsx(Ne,{quizType:"custom-quiz",children:a.jsx(wt,{})})}),a.jsx(O,{path:"/results",element:a.jsx(Ne,{quizType:"results",children:a.jsx(bt,{})})})]})})})})})})]})]})})}z.createRoot(document.getElementById("root")).render(a.jsx(s.StrictMode,{children:a.jsx(M,{client:F,children:a.jsx($,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:a.jsx(xe,{children:a.jsxs(we,{children:[a.jsx(St,{}),!1]})})})})}));export{De as L,me as a,Te as b,oe as c,se as e,Z as g,H as i,ne as l,te as s,fe as u,he as w};
