import{r as e,j as s,m as l}from"./vendor-ClUtAdzf.js";import"./index-xzrd9Y61.js";import{c as a}from"./blockTestService-Cc45B3UR.js";import"./responseService-CzKTm3IW.js";const t=[2,4,6,8],i=[20,30,40,50],o=[{value:"",label:"Mixed"},{value:"easy",label:"Easy"},{value:"medium",label:"Medium"},{value:"hard",label:"Hard"}],n=({options:e,value:l,onChange:a,label:t})=>s.jsx("div",{className:"flex gap-3 flex-wrap mb-2",children:e.map(e=>s.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl border transition-all shadow-sm font-semibold text-lg "+(l===e?"bg-blue-600 text-white border-blue-700 scale-105":"bg-white border-gray-300 hover:bg-blue-50"),onClick:()=>a(e),"aria-pressed":l===e,children:e},e))}),r=({onComplete:r})=>{const[d,u]=e.useState(4),[c,m]=e.useState(40),[b,x]=e.useState(""),[h,p]=e.useState(!1),[g,j]=e.useState(null),v=d*c,f=d*(c+5);return s.jsxs(l.form,{onSubmit:async e=>{e.preventDefault(),p(!0),j(null);try{const e=window?.supabase?.auth?.user?.()?.id||null;if(!e)throw new Error("User not logged in");const s=await a({userId:e,numBlocks:d,questionsPerBlock:c,totalQuestions:v,settings:{difficulty:b}});r(s)}catch(s){j(s.message||"Failed to create session")}finally{p(!1)}},className:"max-w-md mx-auto p-6 bg-white rounded-xl shadow-lg space-y-6",initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{duration:.4},children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-600"}),s.jsx("div",{className:"h-0.5 w-8 bg-blue-300"}),s.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-300"}),s.jsx("div",{className:"h-0.5 w-8 bg-blue-300"}),s.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-300"}),s.jsx("span",{className:"ml-3 text-sm text-blue-700 font-medium",children:"Step 1 of 3: Configure Block Test"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block font-medium mb-1",children:"Number of Blocks"}),s.jsx(n,{options:t,value:d,onChange:u})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block font-medium mb-1",children:"Questions per Block"}),s.jsx(n,{options:i,value:c,onChange:m})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block font-medium mb-1",children:"Difficulty"}),s.jsx("select",{value:b,onChange:e=>x(e.target.value),className:"w-full p-2 border rounded",children:o.map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["Total: ",s.jsx("b",{children:v})," questions â€¢ Est. ",s.jsx("b",{children:f})," min"]}),g&&s.jsx("div",{className:"text-red-600",children:g}),s.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded-xl font-semibold text-lg shadow-lg hover:bg-blue-700 transition",disabled:h,children:h?"Starting...":"Start Block Test"})]})};export{r as default};
