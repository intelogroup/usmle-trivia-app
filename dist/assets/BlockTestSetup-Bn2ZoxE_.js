import{r as e,j as s,m as l}from"./vendor-BncJ-8MG.js";import{b as a}from"./questionService-Q0NM_NKy.js";import"./index-D2SK6Mkl.js";const t=[2,4,6,8],i=[20,30,40,50],n=[{value:"",label:"Mixed"},{value:"easy",label:"Easy"},{value:"medium",label:"Medium"},{value:"hard",label:"Hard"}],o=({options:e,value:l,onChange:a,label:t})=>s.jsx("div",{className:"flex gap-3 flex-wrap mb-2",children:e.map(e=>s.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl border transition-all shadow-sm font-semibold text-lg "+(l===e?"bg-blue-600 text-white border-blue-700 scale-105":"bg-white border-gray-300 hover:bg-blue-50"),onClick:()=>a(e),"aria-pressed":l===e,children:e},e))}),d=({onComplete:d})=>{const[r,u]=e.useState(4),[c,m]=e.useState(40),[b,x]=e.useState(""),[h,g]=e.useState(!1),[p,j]=e.useState(null),v=r*c,f=r*(c+5);return s.jsxs(l.form,{onSubmit:async e=>{e.preventDefault(),g(!0),j(null);try{const e=window?.supabase?.auth?.user?.()?.id||null;if(!e)throw new Error("User not logged in");const s=await a({userId:e,numBlocks:r,questionsPerBlock:c,totalQuestions:v,settings:{difficulty:b}});d(s)}catch(s){j(s.message||"Failed to create session")}finally{g(!1)}},className:"max-w-md mx-auto p-6 bg-white rounded-xl shadow-lg space-y-6",initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{duration:.4},children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-600"}),s.jsx("div",{className:"h-0.5 w-8 bg-blue-300"}),s.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-300"}),s.jsx("div",{className:"h-0.5 w-8 bg-blue-300"}),s.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-300"}),s.jsx("span",{className:"ml-3 text-sm text-blue-700 font-medium",children:"Step 1 of 3: Configure Block Test"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block font-medium mb-1",children:"Number of Blocks"}),s.jsx(o,{options:t,value:r,onChange:u})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block font-medium mb-1",children:"Questions per Block"}),s.jsx(o,{options:i,value:c,onChange:m})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block font-medium mb-1",children:"Difficulty"}),s.jsx("select",{value:b,onChange:e=>x(e.target.value),className:"w-full p-2 border rounded",children:n.map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["Total: ",s.jsx("b",{children:v})," questions â€¢ Est. ",s.jsx("b",{children:f})," min"]}),p&&s.jsx("div",{className:"text-red-600",children:p}),s.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded-xl font-semibold text-lg shadow-lg hover:bg-blue-700 transition",disabled:h,children:h?"Starting...":"Start Block Test"})]})};export{d as default};
