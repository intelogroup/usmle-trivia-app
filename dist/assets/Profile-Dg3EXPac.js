import{r as e,u as a,T as t,p as s,q as r,j as i,U as l,A as d,az as n,B as c,a as o,K as x,aA as m,aB as g,aC as y,X as b}from"./vendor-react-BiMcuLH7.js";import{u as p,t as h}from"./index-DH4Rn4SV.js";import{u}from"./vendor-Dcu_KtFL.js";const j=()=>{const[j,N]=e.useState(null),[k,f]=e.useState(!1),[w,v]=e.useState(!1),{user:S,profile:z,signOut:C}=p(),_=a(),T=[{icon:t,label:"Total Points",value:z?.total_points?.toLocaleString()||"0",color:"text-yellow-600"},{icon:s,label:"Overall Accuracy",value:"78%",color:"text-green-600"},{icon:r,label:"Study Time",value:"42h",color:"text-blue-600"}],M=[{icon:c,label:"Notifications",enabled:!0},{icon:o,label:"Dark Mode",enabled:!1}];return i.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[i.jsxs(u.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm text-center border border-gray-50 dark:border-gray-700",children:[i.jsx(u.div,{whileHover:{scale:1.05},className:"w-20 h-20 rounded-full mx-auto mb-4 overflow-hidden ring-4 ring-blue-100 dark:ring-blue-900",children:z?.avatar_url?i.jsx("img",{src:z.avatar_url,alt:"Profile",className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary-400 to-secondary-500 flex items-center justify-center",children:i.jsx(l,{size:32,className:"text-white"})})}),i.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-dark-50 mb-1",children:z?.display_name||S?.user_metadata?.full_name||"USMLE Student"}),i.jsx("p",{className:"text-gray-600 dark:text-dark-300 text-sm",children:z?.school_of_medicine||"USMLE Step 1 Candidate"}),i.jsx("div",{className:"mt-4 flex justify-center",children:i.jsx("span",{className:"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-3 py-1 rounded-full text-sm font-medium",children:z?.achievement_grades?.name||"Beginner"})}),z?.countries&&i.jsxs("div",{className:"mt-2 flex items-center justify-center gap-2",children:[i.jsx("span",{className:"text-xl",children:z.countries.flag_emoji}),i.jsx("span",{className:"text-sm text-gray-600 dark:text-dark-300",children:z.countries.name})]})]}),i.jsx(u.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"grid grid-cols-3 gap-4",children:T.map((e,a)=>i.jsxs(u.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3+.1*a},whileHover:{scale:1.05},className:"bg-white dark:bg-expo-850 rounded-xl p-4 shadow-card dark:shadow-card-dark text-center border border-gray-50 dark:border-expo-700",children:[i.jsx(e.icon,{size:24,className:`mx-auto mb-2 ${e.color}`}),i.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-dark-50",children:e.value}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-dark-300",children:e.label})]},e.label))}),i.jsxs(u.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"bg-white dark:bg-expo-850 rounded-xl p-6 shadow-card dark:shadow-card-dark border border-gray-50 dark:border-expo-700",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(d,{size:20,className:"text-yellow-600"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Achievements"})]}),i.jsx("div",{className:"space-y-3",children:[{title:"First Quiz",description:"Complete your first quiz",earned:!0},{title:"Perfect Score",description:"Get 100% on any quiz",earned:!0},{title:"Study Streak",description:"7 days in a row",earned:!1},{title:"Category Master",description:"Complete all questions in a category",earned:!1}].map((e,a)=>i.jsxs(u.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.6+.1*a},className:"flex items-center gap-3 p-3 rounded-lg "+(e.earned?"bg-green-50 border border-green-200":"bg-gray-50"),children:[i.jsx("div",{className:"w-3 h-3 rounded-full "+(e.earned?"bg-green-500":"bg-gray-300")}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium "+(e.earned?"text-green-800":"text-gray-600"),children:e.title}),i.jsx("p",{className:"text-sm "+(e.earned?"text-green-600":"text-gray-500"),children:e.description})]})]},e.title))})]}),i.jsxs(u.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8},className:"bg-white dark:bg-expo-850 rounded-xl p-6 shadow-card dark:shadow-card-dark border border-gray-50 dark:border-expo-700",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(n,{size:20,className:"text-gray-600"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Settings"})]}),i.jsxs("div",{className:"space-y-4",children:[M.map((e,a)=>i.jsxs(u.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.9+.1*a},className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(e.icon,{size:20,className:"text-gray-600 dark:text-dark-300"}),i.jsx("span",{className:"text-gray-800 dark:text-dark-50",children:e.label})]}),i.jsx(u.button,{whileTap:{scale:.95},className:"w-12 h-6 rounded-full transition-colors "+(e.enabled?"bg-blue-500":"bg-gray-300"),children:i.jsx(u.div,{className:"w-5 h-5 bg-white rounded-full shadow-sm",animate:{x:e.enabled?26:2},transition:{type:"spring",stiffness:300,damping:30}})})]},e.label)),i.jsxs(u.button,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:1.1},whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full flex items-center gap-3 p-3 text-left hover:bg-gray-50 dark:hover:bg-expo-800 rounded-lg transition-colors",children:[i.jsx(x,{size:20,className:"text-gray-600 dark:text-dark-300"}),i.jsx("span",{className:"text-gray-800 dark:text-dark-50",children:"More Settings"})]}),i.jsxs(u.button,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:1.2},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:async()=>{v(!0);try{await C(),_("/auth/welcome",{replace:!0})}catch(e){console.error("Sign out error:",e)}finally{v(!1)}},disabled:w,className:"w-full flex items-center gap-3 p-3 text-left hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors text-red-600 dark:text-red-400 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(m,{size:20}),i.jsx("span",{children:w?"Signing Out...":"Sign Out"})]})]})]}),i.jsxs(u.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:1},className:"bg-white dark:bg-expo-850 rounded-xl p-6 shadow-card dark:shadow-card-dark border border-gray-50 dark:border-expo-700",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(l,{size:20,className:"text-gray-600"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Account Information"})]}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600 dark:text-dark-300",children:"Email:"}),i.jsx("span",{className:"text-gray-800 dark:text-dark-50",children:S?.email})]}),z?.bio&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600 dark:text-dark-300",children:"Bio:"}),i.jsx("span",{className:"text-gray-800 dark:text-dark-50",children:z.bio})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600 dark:text-dark-300",children:"Member Since:"}),i.jsx("span",{className:"text-gray-800 dark:text-dark-50",children:new Date(S?.created_at).toLocaleDateString()})]})]})]}),i.jsxs(u.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:1.1},className:"bg-white dark:bg-expo-850 rounded-xl p-6 shadow-card dark:shadow-card-dark border border-gray-50 dark:border-expo-700",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(g,{size:20,className:"text-blue-600"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Database Connection"})]}),i.jsx(u.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:async()=>{f(!0);const e=await h();N(e),f(!1),setTimeout(()=>N(null),5e3)},disabled:k,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-semibold py-3 px-4 rounded-lg transition-colors disabled:cursor-not-allowed mb-4",children:k?"Testing Connection...":"Test Database Connection"}),j&&i.jsxs(u.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-lg border "+(j.success?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"),children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[j.success?i.jsx(y,{size:18,className:"text-green-600"}):i.jsx(b,{size:18,className:"text-red-600"}),i.jsx("span",{className:"font-semibold",children:j.success?"Connection Successful":"Connection Failed"})]}),i.jsx("p",{className:"text-sm",children:j.message}),j.data&&i.jsx("pre",{className:"mt-2 text-xs bg-white/50 p-2 rounded border overflow-x-auto",children:JSON.stringify(j.data,null,2)})]})]})]})};export{j as default};
