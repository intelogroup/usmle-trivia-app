import{j as e,v as s,w as t,ar as a,m as r,i,a_ as n,a$ as l,u as o,k as c,b0 as d,as as x,H as u,aA as m,au as g,b1 as h}from"./vendor-BncJ-8MG.js";const p=({current:l,total:o,progress:c,score:d=0,accuracy:x=0,averageTime:u=0,showDetailed:m=!0,size:g="normal"})=>{const h=Math.max(0,Math.min(100,l/o*100)),p=Math.max(0,Math.min(100,x)),y=o-l,b=()=>p>=80?"text-green-600 dark:text-green-400":p>=60?"text-blue-600 dark:text-blue-400":p>=40?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400",f=(()=>{switch(g){case"compact":return{container:"py-2",progressHeight:"h-2",text:"text-sm",icons:"w-4 h-4",spacing:"space-y-1"};case"detailed":return{container:"py-6",progressHeight:"h-4",text:"text-base",icons:"w-5 h-5",spacing:"space-y-4"};default:return{container:"py-4",progressHeight:"h-3",text:"text-sm",icons:"w-4 h-4",spacing:"space-y-2"}}})();return e.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4 ${f.container}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h3",{className:`font-semibold text-gray-900 dark:text-white ${f.text}`,children:"Progress"}),e.jsxs("span",{className:`font-bold ${f.text} text-blue-600 dark:text-blue-400`,children:[l," / ",o]})]}),m&&e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(s,{className:"w-4 h-4 text-purple-500"}),e.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["Score: ",e.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:d})]})]}),x>0&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(t,{className:"w-4 h-4 text-green-500"}),e.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["Accuracy: ",e.jsxs("span",{className:b(),children:[Math.round(p),"%"]})]})]}),u>0&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(a,{className:"w-4 h-4 text-orange-500"}),e.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:["Avg: ",e.jsxs("span",{className:"text-orange-600 dark:text-orange-400",children:[Math.round(u),"s"]})]})]})]})]}),e.jsxs("div",{className:`relative bg-gray-200 dark:bg-gray-700 rounded-full ${f.progressHeight} overflow-hidden mb-4`,children:[e.jsxs(r.div,{className:`${f.progressHeight} bg-gradient-to-r ${p>=80?"from-green-500 to-emerald-600":p>=60?"from-blue-500 to-blue-600":p>=40?"from-yellow-500 to-orange-500":"from-orange-500 to-red-500"} rounded-full relative`,initial:{width:0},animate:{width:`${h}%`},transition:{duration:.8,ease:"easeOut"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"}),h>15&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-end pr-2",children:e.jsxs("span",{className:"text-xs font-bold text-white drop-shadow-sm",children:[Math.round(h),"%"]})})]}),e.jsx(r.div,{className:"absolute top-0 h-full w-1 bg-white shadow-lg",initial:{left:0},animate:{left:`${h}%`},transition:{duration:.8,ease:"easeOut"},style:{transform:"translateX(-50%)"}})]}),o<=20&&"compact"!==g&&e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"flex items-center justify-center space-x-2 flex-wrap gap-1 pb-6",children:Array.from({length:o},(s,t)=>{const a=t+1,o=a<l,c=a===l;return e.jsxs(r.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.05*t,duration:.3},className:"relative",children:[o?e.jsx(r.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1},className:"flex items-center justify-center",children:e.jsx(i,{className:`${f.icons} text-green-500`})}):c?e.jsx(r.div,{animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"flex items-center justify-center",children:e.jsx(n,{className:`${f.icons} text-blue-500 fill-current`})}):e.jsx(n,{className:`${f.icons} text-gray-300 dark:text-gray-600`}),e.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 text-xs text-gray-500 dark:text-gray-400",children:a})]},t)})})}),m&&"detailed"===g&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:y}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Remaining"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:d}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Correct"})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-3",children:[e.jsxs("div",{className:`text-lg font-bold ${b()}`,children:[Math.round(p),"%"]}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Accuracy"})]}),e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:u>0?`${Math.round(u)}s`:"--"}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Avg Time"})]})]}),m&&"compact"!==g&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"text-sm text-gray-600 dark:text-gray-400",children:h>=75?e.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:"ðŸŽ‰ Almost there! You're doing great!"}):h>=50?e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:"ðŸš€ Halfway done! Keep up the momentum!"}):h>=25?e.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-medium",children:"ðŸ’ª Good progress! Stay focused!"}):e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"ðŸŒŸ Just getting started! You've got this!"})})})]})},y=({isFetching:s})=>e.jsxs("div",{className:"flex flex-col justify-center items-center h-screen",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading quiz questions..."}),s&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Fetching latest questions ",e.jsx(l,{size:16,className:"inline-block animate-pulse"})]})]}),b=e=>e?"NO_QUESTIONS"===e.code?e.message||"No questions found for your selected category or difficulty.":"NO_CONFIG"===e.code?"Quiz configuration is missing. Please try starting the quiz again.":"FETCH_ERROR"===e.code?e.message||"Failed to load questions from the database.":e.message?.includes("FETCH_QUESTIONS_ERROR")?"Failed to fetch quiz questions. Please try again or adjust your filters.":e.message?.includes("SESSION_CREATION_ERROR")?"Failed to create a quiz session. Please try starting the quiz again.":e.message?.includes("RESPONSE_RECORDING_ERROR")?"Failed to record your response. Please continue to the next question.":e.message?.includes("SESSION_COMPLETION_ERROR")?"Failed to complete the quiz session. Your progress may not be saved.":"ERR_NETWORK"===e.code||e.message?.toLowerCase().includes("network")?"Network error: Please check your internet connection and try again.":"ERR_SERVER"===e.code||500===e.status?"Server error: Please try again later.":406===e.status?"Not Acceptable: The server could not process your request. Please contact support if this persists.":401===e.status||403===e.status?"You are not authorized to access this quiz. Please log in or check your permissions.":e.message||"There was a problem loading the quiz questions.":"There was a problem loading the quiz questions.",f=({error:s,onRetry:t,categoryId:a,questionCount:r,getOfflineData:i,showOfflineOption:n=!0})=>{const l=o(),p=n?i?.(a,r):null,y=(e=>"NO_QUESTIONS"===e.code?m:"NO_CONFIG"===e.code?g:"FETCH_ERROR"===e.code?c:h)(s),f=((e,s,t)=>{const a=[];return"NO_QUESTIONS"===e.code?(a.push("Try selecting a different difficulty level"),a.push("Choose a different category"),a.push("Use mixed categories for more options"),t>10&&a.push(`Try with fewer questions (${Math.max(5,t-5)})`)):"FETCH_ERROR"===e.code||e.message?.includes("FETCH_QUESTIONS_ERROR")?(a.push("Check your internet connection"),a.push("Try again in a few moments"),a.push("Contact support if the problem persists")):"NO_CONFIG"===e.code||e.message?.includes("SESSION_CREATION_ERROR")?(a.push("Go back to quiz selection"),a.push("Try starting the quiz again")):e.message?.includes("RESPONSE_RECORDING_ERROR")||e.message?.includes("SESSION_COMPLETION_ERROR")?(a.push("Continue with the quiz if possible"),a.push("Your progress may not be saved"),a.push("Contact support if issues persist")):(a.push("Try refreshing the page"),a.push("Check your internet connection"),a.push("Go back to quiz selection")),a})(s,0,r);return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8 shadow-lg border border-gray-200 dark:border-gray-700 max-w-lg w-full text-center",children:[e.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(y,{className:"w-8 h-8 text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Unable to Load Quiz"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:b(s)}),s&&(s.code||s.details)&&e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-6 text-left",children:[e.jsxs("h4",{className:"font-medium text-yellow-800 dark:text-yellow-200 mb-2 flex items-center",children:[e.jsx(c,{className:"w-4 h-4 mr-2"}),"What went wrong:"]}),e.jsx("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 space-y-1",children:f.map((s,t)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-yellow-500 mr-2",children:"â€¢"}),s]},t))})]}),e.jsxs("div",{className:"space-y-3",children:[t&&e.jsxs("button",{onClick:t,className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors duration-200 flex items-center justify-center space-x-2",children:[e.jsx(d,{className:"w-4 h-4"}),e.jsx("span",{children:"Try Again"})]}),p&&p.length>0&&e.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors duration-200 flex items-center justify-center space-x-2",children:[e.jsx(x,{className:"w-4 h-4"}),e.jsxs("span",{children:["Use Offline Questions (",p.length,")"]})]}),e.jsxs("button",{onClick:()=>{l("/quick-quiz",{state:{categoryId:"mixed",categoryName:"Mixed Categories",questionCount:Math.min(r||10,10),quizType:"quick"}})},className:"w-full bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-purple-700 transition-colors duration-200 flex items-center justify-center space-x-2",children:[e.jsx(x,{className:"w-4 h-4"}),e.jsx("span",{children:"Try Mixed Quiz"})]}),e.jsx("button",{onClick:()=>l("/quiz"),className:"w-full bg-gray-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-gray-700 transition-colors duration-200",children:"Back to Categories"}),e.jsxs("button",{onClick:()=>l("/"),className:"w-full bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200 flex items-center justify-center space-x-2",children:[e.jsx(u,{className:"w-4 h-4"}),e.jsx("span",{children:"Go Home"})]})]}),!1]})})};export{y as Q,f as a,p as b};
